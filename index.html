<!doctype html>
<html lang="id" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jepang Mengaji ‚Äî Beranda</title>
  <link rel="icon" href="jm.jpeg" />
  <style>
    :root{
      --bg:#ffffff;--bg-soft:#f8fafc;--text:#0f172a;--muted:#475569;
      --card:#fff;--border:#e5e7eb;--primary:#ef4444;
      --shadow:0 6px 24px rgba(2,6,23,.08)
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,Arial;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{max-width:1180px;margin:0 auto;padding:0 16px}
    /* NAVBAR */
    .nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.95);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:10px 0}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800}
    .brand img{width:36px;height:36px;border-radius:8px;border:1px solid var(--border)}
    .nav-links{display:flex;gap:8px;align-items:center;overflow:auto}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:#fff;border-radius:999px;padding:8px 12px}
    .btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
    /* LAYOUT + SIDEBAR */
    .layout{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:1024px){ .layout{grid-template-columns:260px 1fr} }
    .sidebar{display:none}
    @media(min-width:1024px){ .sidebar{display:block;position:sticky;top:64px;height:calc(100vh - 80px)} }
    .sidecard{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:12px;box-shadow:var(--shadow)}
    .sidecard h3{margin:4px 0 8px;font-size:15px}
    .sidecard a{display:block;padding:8px;border-radius:8px}
    .sidecard a:hover{background:var(--bg-soft)}
    /* SECTIONS */
    .section{padding:18px 0}
    .section h2{margin:0 0 10px}
    .cards{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:720px){.cards{grid-template-columns:repeat(2,1fr)}}
    .card{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:12px}
    .muted{color:var(--muted)}
    .badge{display:inline-block;font-size:12px;border:1px solid var(--border);border-radius:999px;padding:2px 8px;background:#fff}
    footer{border-top:1px solid var(--border);padding:20px 0;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-inner">
      <div class="brand"><img src="jm.jpeg" alt="JM"><span>Jepang Mengaji</span></div>
      <div class="nav-links">
        <a class="btn" href="#updates">Info Terbaru</a>
        <a class="btn" href="#urgent">Penting</a>
        <a class="btn" href="#artikel">Artikel</a>
        <a class="btn" href="#kajian">Kajian</a>
        <a class="btn primary" href="https://www.youtube.com/@JepangMengaji" target="_blank">Arsip YouTube</a>
      </div>
    </div>
  </nav>

  <div class="container layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidecard">
        <h3>Navigasi</h3>
        <a href="#updates">üÜï Info Terbaru</a>
        <a href="#urgent">‚ö†Ô∏è Pengumuman Penting</a>
        <a href="#artikel">üìñ Artikel</a>
        <a href="#kajian">üìö Kajian</a>
        <a href="#donasi">‚ù§Ô∏è Donasi</a>
        <a href="https://www.youtube.com/@JepangMengaji" target="_blank">‚ñ∂Ô∏è Arsip YouTube</a>
        <hr>
        <a href="https://chat.whatsapp.com/Fg2UKlhT5s9B7oYeTsMMKO" target="_blank">üì≤ WhatsApp</a>
        <a href="https://t.me/jepangmengaji_channel" target="_blank">üì£ Telegram</a>
        <a href="mailto:jepangmengaji@gmail.com">‚úâÔ∏è Email</a>
      </div>
    </aside>

    <main>
      <!-- Info Terbaru -->
      <section id="updates" class="section">
        <h2>Info Terbaru</h2>
        <div id="updatesList" class="cards"></div>
      </section>
      <!-- Penting -->
      <section id="urgent" class="section">
        <h2>Pengumuman Penting</h2>
        <div id="urgentList" class="cards"></div>
      </section>
      <!-- Artikel -->
      <section id="artikel" class="section">
        <h2>Artikel</h2>
        <div id="articlesList" class="cards"></div>
      </section>
      <!-- Kajian -->
      <section id="kajian" class="section">
        <h2>Kajian</h2>
        <div id="kajianList" class="cards"></div>
      </section>
      <!-- Donasi -->
      <section id="donasi" class="section">
        <h2>Donasi</h2>
        <div class="cards">
          <div class="card">
            <h3>‚ù§Ô∏è Donasi Kegiatan</h3>
            <p class="muted">SMBC/Jenius a.n. Wahyu Setiawan ‚Äî <b>90220139952</b></p>
            <p class="muted">Yucho Ginko a.n. „Éà„É™„Çµ„É≥„Éú„Éâ ‚Äî <b>14660-20688191</b></p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer>¬© <span id="year"></span> Jepang Mengaji ‚Ä¢ Design by Wahyu</footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // CSV URLs
    const ARTICLES="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=0&single=true&output=csv";
    const KAJIAN="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=450885199&single=true&output=csv";
    const INFO="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=1656910010&single=true&output=csv";
    const PENTING="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=215662022&single=true&output=csv";

    // CSV parser (quotes-aware)
    async function fetchCSV(url){
      const res=await fetch(url+"&_="+Date.now());
      const text=(await res.text()).replace(/^\uFEFF/,'');
      const rows=[];let row=[],cell='',inQuotes=false;
      for(let i=0;i<text.length;i++){
        const c=text[i],n=text[i+1];
        if(c=='"'){ if(inQuotes&&n=='"'){cell+='"';i++;} else inQuotes=!inQuotes; }
        else if(c===','&&!inQuotes){row.push(cell);cell='';}
        else if((c==='\n'||(c==='\r'&&n==='\n'))&&!inQuotes){if(c==='\r')i++;row.push(cell);rows.push(row);row=[];cell='';}
        else cell+=c;
      }
      if(cell||row.length){row.push(cell);rows.push(row);}
      const header=(rows.shift()||[]).map(h=>h.trim().toLowerCase());
      return rows.map(r=>Object.fromEntries(header.map((h,i)=>[h,(r[i]||'').trim()])));
    }

    const pick=(o,keys)=>{for(const k of keys){const v=o[k];if(v&&v.trim()) return v;}return "";};

    function render(list,id,fallback){
      const wrap=document.getElementById(id); wrap.innerHTML="";
      if(!list.length){wrap.innerHTML='<div class="card muted">'+fallback+'</div>';return;}
      list.forEach(it=>{
        const el=document.createElement("article"); el.className="card";
        el.innerHTML=`
          <h3>${pick(it,["title","judul","nama"])}</h3>
          ${pick(it,["excerpt","konten","deskripsi"]) ? `<p class="muted">${pick(it,["excerpt","konten","deskripsi"])}</p>` : ""}
          ${pick(it,["date","tanggal","tgl"]) ? `<div class="muted">${pick(it,["date","tanggal","tgl"])}</div>` : ""}
          ${pick(it,["href","link","url"]) ? `<a class="btn" href="${pick(it,["href","link","url"])}" target="_blank">Baca</a>` : ""}
        `;
        wrap.appendChild(el);
      });
    }

    (async()=>{
      render(await fetchCSV(INFO),"updatesList","Belum ada info.");
      render(await fetchCSV(PENTING),"urgentList","Belum ada pengumuman.");
      render(await fetchCSV(ARTICLES),"articlesList","Belum ada artikel.");
      render(await fetchCSV(KAJIAN),"kajianList","Belum ada kajian.");
    })();
  </script>
</body>
</html>
