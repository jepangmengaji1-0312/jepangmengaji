<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Jepang Mengaji ‚Äî Beranda</title>
  <link rel="icon" href="jm.jpeg"/>
  <style>
    :root{
      --bg:#fff; --bg-soft:#f9fafb; --text:#111827;
      --muted:#6b7280; --border:#e5e7eb;
      --primary:#ef4444; --shadow:0 4px 20px rgba(0,0,0,.08);
    }
    body{margin:0;font-family:system-ui,Arial;background:var(--bg);color:var(--text)}
    body::before{
      content:""; position:fixed; inset:0; z-index:-1;
      background:linear-gradient(rgba(255,255,255,.94),rgba(255,255,255,.94)),
        url("jm.jpeg") center/40% no-repeat;
      opacity:.15;
    }
    a{text-decoration:none;color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:0 1rem}

    /* NAV */
    .nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.95);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:.6rem 0}
    .brand{display:flex;align-items:center;gap:.5rem;font-weight:700}
    .brand img{width:32px;height:32px;border-radius:50%}
    .menu-toggle{display:none;cursor:pointer;font-size:22px;margin-right:.5rem}
    .nav-links{display:flex;gap:.5rem;align-items:center}
    .nav-links a{padding:.35rem .7rem;border:1px solid var(--border);border-radius:999px;white-space:nowrap}
    .nav-links a.primary{background:var(--primary);color:#fff;border-color:var(--primary)}
    @media(max-width:768px){
      .menu-toggle{display:block}
      .nav-links{display:none;flex-direction:column;align-items:flex-start;padding:1rem}
      .nav-links.show{display:flex;position:absolute;top:100%;left:0;right:0;background:#fff;border-bottom:1px solid var(--border)}
    }

    /* Sections */
    section{padding:2rem 0}
    h2{margin:0 0 1rem}
    .grid{display:grid;gap:1rem}
    .grid-3{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{border:1px solid var(--border);border-radius:.75rem;padding:1rem;background:#fff;box-shadow:var(--shadow)}
    .muted{color:var(--muted)}

    /* Carousel */
    .carousel{position:relative;border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .frame{width:100%;aspect-ratio:16/9;overflow:hidden}
    .track{display:flex;height:100%;transition:transform .5s ease}
    .slide{min-width:100%;height:100%}
    .slide img{width:100%;height:100%;object-fit:cover}
    .ctrl{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;pointer-events:none}
    .ctrl button{pointer-events:auto;background:rgba(0,0,0,.5);color:#fff;border:none;width:40px;height:40px;border-radius:50%}
    .dots{position:absolute;bottom:8px;left:0;right:0;display:flex;justify-content:center;gap:6px}
    .dot{width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,.5)}
    .dot.active{background:#fff}

    footer{border-top:1px solid var(--border);padding:1rem 0;text-align:center;font-size:.9rem;color:var(--muted)}
    .social{display:flex;gap:.5rem;justify-content:center;margin-top:.5rem;flex-wrap:wrap}
    .btn-social{padding:.4rem .8rem;border:1px solid var(--border);border-radius:.5rem;font-size:.9rem;background:#fff}
  </style>
</head>
<body>
  <!-- NAV -->
  <nav class="nav">
    <div class="container nav-inner">
      <div style="display:flex;align-items:center;gap:.5rem">
        <div class="menu-toggle" id="menuBtn">‚ò∞</div>
        <div class="brand"><img src="jm.jpeg" alt="Logo"><span>Jepang Mengaji</span></div>
      </div>
      <div class="nav-links" id="navLinks">
        <a href="#top">Home</a>
        <a href="#info">Info Terbaru</a>
        <a href="#urgent">Penting</a>
        <a href="#artikel">Artikel</a>
        <a href="#kajian">Kajian</a>
        <a class="primary" href="https://www.youtube.com/@jepangmengaji1390" target="_blank">Arsip YouTube</a>
      </div>
    </div>
  </nav>

  <main class="container" id="top">
    <!-- Slideshow -->
    <section id="slideshow">
      <div class="carousel">
        <div class="frame">
          <div class="track" id="track">
            <div class="slide"><img src="assets/slides/1.jpeg" alt="Slide 1"></div>
            <div class="slide"><img src="assets/slides/2.jpeg" alt="Slide 2"></div>
            <div class="slide"><img src="assets/slides/3.jpeg" alt="Slide 3"></div>
          </div>
          <div class="ctrl"><button id="prev">‚Äπ</button><button id="next">‚Ä∫</button></div>
          <div class="dots" id="dots"></div>
        </div>
      </div>
    </section>

    <section id="info"><h2>Info Terbaru</h2><div id="infoList" class="grid grid-3"></div></section>
    <section id="urgent"><h2>Pengumuman Penting</h2><div id="urgentList" class="grid grid-3"></div></section>
    <section id="artikel"><h2>Artikel</h2><div id="articlesList" class="grid grid-3"></div></section>
    <section id="kajian"><h2>Kajian</h2><div id="kajianList" class="grid grid-3"></div></section>

    <section id="donasi">
      <h2>Donasi</h2>
      <div class="grid grid-3">
        <div class="card">
          <h3>‚ù§Ô∏è Donasi Kegiatan</h3>
          <p class="muted">Dukung dakwah: operasional, dokumentasi, kajian.</p>
          <ul class="muted">
            <li>SMBC/Jenius a.n. Wahyu Setiawan ‚Äî <b>90220139952</b></li>
            <li>Yucho Ginko a.n. „Éà„É™„Çµ„É≥„Éú„Éâ ‚Äî <b>14660-20688191</b></li>
          </ul>
        </div>
        <div class="card">
          <h3>‚úÖ Konfirmasi Transfer</h3>
          <input id="nama" placeholder="Nama" style="width:100%;margin:.3rem 0;padding:.4rem"/>
          <input id="nominal" placeholder="Nominal" style="width:100%;margin:.3rem 0;padding:.4rem"/>
          <input id="tgl" type="date" style="width:100%;margin:.3rem 0;padding:.4rem"/>
          <select id="bank" style="width:100%;margin:.3rem 0;padding:.4rem"><option>SMBC/Jenius</option><option>Yucho</option></select>
          <button id="btnWA" style="margin-top:.5rem;padding:.5rem 1rem;background:var(--primary);color:#fff;border:none;border-radius:.5rem">Kirim via WhatsApp</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ¬© 2025 Jepang Mengaji ‚Ä¢ Design by Wahyu
    <div class="social">
      <a class="btn-social" href="https://chat.whatsapp.com/Fg2UKlhT5s9B7oYeTsMMKO" target="_blank">üì≤ WhatsApp Group</a>
      <a class="btn-social" href="https://t.me/jepangmengaji_channel" target="_blank">üì£ Telegram</a>
      <a class="btn-social" href="https://www.youtube.com/@jepangmengaji1390" target="_blank">‚ñ∂Ô∏è YouTube</a>
      <a class="btn-social" href="https://www.instagram.com/jepangmengaji" target="_blank">üì∑ Instagram</a>
      <a class="btn-social" href="mailto:jepangmengaji@gmail.com">‚úâÔ∏è Email</a>
    </div>
  </footer>

  <script>
    // burger
    document.getElementById('menuBtn').onclick=()=>document.getElementById('navLinks').classList.toggle('show');

    // WA konfirmasi
    document.getElementById('btnWA').onclick=()=>{
      const nama=document.getElementById('nama').value;
      const nominal=document.getElementById('nominal').value;
      const tgl=document.getElementById('tgl').value;
      const bank=document.getElementById('bank').value;
      const msg=`Assalamu'alaikum, saya konfirmasi donasi.\nNama: ${nama}\nNominal: ${nominal}\nTanggal: ${tgl}\nBank: ${bank}`;
      window.open(`https://wa.me/817084810427?text=${encodeURIComponent(msg)}`);
    };

    // carousel
    const track=document.getElementById('track');
    const slides=Array.from(track.children);
    const prev=document.getElementById('prev');
    const next=document.getElementById('next');
    const dotsWrap=document.getElementById('dots');
    let index=0,timer=null;
    function buildDots(){dotsWrap.innerHTML='';slides.forEach((_,i)=>{const d=document.createElement('button');d.className='dot'+(i===index?' active':'');d.onclick=()=>go(i,true);dotsWrap.appendChild(d);});}
    function go(i,user){index=(i+slides.length)%slides.length;track.style.transform=`translateX(${-index*100}%)`;Array.from(dotsWrap.children).forEach((el,di)=>el.classList.toggle('active',di===index));if(user) restart();}
    function nextSlide(){go(index+1,false)};function prevSlide(){go(index-1,true)};function restart(){clearInterval(timer);timer=setInterval(nextSlide,5000);}
    next.onclick=nextSlide;prev.onclick=prevSlide;buildDots();restart();

    // CSV URL
    const ARTICLES="https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?gid=0&single=true&output=csv";
    const KAJIAN="https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?gid=450885199&single=true&output=csv";
    const INFO="https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?gid=1656910010&single=true&output=csv";
    const PENTING="https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?gid=215662022&single=true&output=csv";

    async function fetchCSV(url){
      try{
        const res=await fetch(url+"&_="+Date.now());
        const text=await res.text();
        const rows=text.split(/\r?\n/).map(r=>r.split(","));
        const headers=(rows.shift()||[]).map(h=>h.trim().toLowerCase());
        return rows.filter(r=>r.some(c=>c.trim()!==""))
                   .map(r=>Object.fromEntries(headers.map((h,i)=>[h,(r[i]||'').trim()])));
      }catch(e){console.error(e);return [];}
    }

    function renderArticles(list){
      const wrap=document.getElementById("articlesList");wrap.innerHTML="";
      if(!list.length){wrap.innerHTML='<div class="card muted">Belum ada artikel.</div>';return;}
      list.forEach(r=>{
        const c=document.createElement("div");c.className="card";
        c.innerHTML=`<h3>${r.title||"Artikel"}</h3>
          ${r.excerpt?'<p class="muted">'+r.excerpt+'</p>':""}
          ${r.date?'<div class="muted">'+r.date+'</div>':""}
          ${r.href?'<a class="btn" href="'+r.href+'" target="_blank">Baca</a>':""}`;
        wrap.appendChild(c);
      });
    }

    function renderInfo(list){
      const wrap=document.getElementById("infoList");wrap.innerHTML="";
      if(!list.length){wrap.innerHTML='<div class="card muted">Belum ada info.</div>';return;}
      list.forEach(r=>{
        const c=document.createElement("div");c.className="card";
        c.innerHTML=`<h3>${r.judul||"Info"}</h3>
          ${r.konten?'<p class="muted">'+r.konten+'</p>':""}
          ${r.tanggal?'<div class="muted">'+r.tanggal+'</div>':""}
          ${r.href?'<a class="btn" href="'+r.href+'" target="_blank">Baca</a>':""}`;
        wrap.appendChild(c);
      });
    }

    function renderPenting(list){
      const wrap=document.getElementById("urgentList");wrap.innerHTML="";
      if(!list.length){wrap.innerHTML='<div class="card muted">Belum ada pengumuman.</div>';return;}
      list.forEach(r=>{
        const c=document.createElement("div");c.className="card";
        c.innerHTML=`<h3>${r.judul||"Pengumuman"}</h3>
          ${r.konten?'<p class="muted">'+r.konten+'</p>':""}
          ${r.tanggal?'<div class="muted">'+r.tanggal+'</div>':""}`;
        wrap.appendChild(c);
      });
    }

    function renderKajian(list){
      const wrap=document.getElementById("kajianList");wrap.innerHTML="";
      if(!list.length){wrap.innerHTML='<div class="card muted">Belum ada kajian.</div>';return;}
      list.forEach(r=>{
        const c=document.createElement("div");c.className="card";
        c.innerHTML=`<h3>${r.judul||"Kajian"}</h3>
          ${r.ustadz?'<div class="muted">üë§ '+r.ustadz+'</div>':""}
          ${r.waktu?'<div class="muted">üóìÔ∏è '+r.waktu+'</div>':""}
          ${r.lokasi?'<div class="muted">üìç '+r.lokasi+'</div>':""}
          ${r.link?'<a class="btn" href="'+r.link+'" target="_blank">Lihat</a>':""}`;
        wrap.appendChild(c);
      });
    }

    (async()=>{
      renderInfo(await fetchCSV(INFO));
      renderPenting(await fetchCSV(PENTING));
      renderArticles(await fetchCSV(ARTICLES));
      renderKajian(await fetchCSV(KAJIAN));
    })();
  </script>
</body>
</html>
