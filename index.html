<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jepang Mengaji — Beranda</title>
  <link rel="icon" href="jm.jpeg">
  <style>
    :root{
      --bg:#fff;--bg-soft:#f8fafc;--text:#0f172a;
      --muted:#64748b;--border:#e5e7eb;
      --primary:#ef4444;--card:#fff;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,ui-sans-serif,system-ui;background:var(--bg);color:var(--text)}
    a{text-decoration:none;color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    /* background watermark logo */
    body::before{
      content:"";position:fixed;inset:0;z-index:-1;
      background:linear-gradient(rgba(255,255,255,.94),rgba(255,255,255,.94)),
                 url("jm.jpeg") center/40% no-repeat;
      opacity:.12;
    }
    /* Navbar */
    .nav{position:sticky;top:0;background:rgba(255,255,255,.95);border-bottom:1px solid var(--border);z-index:50}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:8px 0}
    .brand{display:flex;align-items:center;gap:8px;font-weight:700}
    .brand img{width:34px;height:34px;border-radius:50%}
    .menu-btn{display:flex;flex-direction:column;gap:4px;cursor:pointer;margin-left:8px}
    .menu-btn span{width:24px;height:3px;background:var(--text)}
    ul.nav-links{display:flex;gap:8px;list-style:none}
    .btn{padding:6px 12px;border:1px solid var(--border);border-radius:999px;background:#fff}
    .btn.primary{background:var(--primary);color:#fff;border-color:var(--primary)}
    @media(max-width:800px){
      ul.nav-links{display:none;position:absolute;top:100%;left:0;right:0;flex-direction:column;background:#fff;padding:10px;border-bottom:1px solid var(--border)}
      ul.nav-links.open{display:flex}
    }
    /* Sections */
    section{padding:32px 0}
    h2{margin-bottom:12px;font-size:1.25rem}
    .cards{display:grid;gap:12px}
    @media(min-width:768px){.cards{grid-template-columns:repeat(3,1fr)}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:12px}
    .muted{color:var(--muted);font-size:.9rem}
    /* Donasi */
    .grid-2{display:grid;gap:16px}
    @media(min-width:768px){.grid-2{grid-template-columns:1fr 1fr}}
    footer{border-top:1px solid var(--border);padding:16px;margin-top:40px;color:var(--muted);text-align:center}
  </style>
</head>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <div style="display:flex;align-items:center;gap:8px">
        <div class="menu-btn" id="menuBtn"><span></span><span></span><span></span></div>
        <div class="brand"><img src="jm.jpeg" alt="logo"><span>Jepang Mengaji</span></div>
      </div>
      <ul class="nav-links" id="navLinks">
        <li><a class="btn ghost" href="#info">Info Terbaru</a></li>
        <li><a class="btn ghost" href="#urgent">Penting</a></li>
        <li><a class="btn ghost" href="#artikel">Artikel</a></li>
        <li><a class="btn primary" href="https://www.youtube.com/@jepangmengaji1390" target="_blank">Arsip YouTube</a></li>
      </ul>
    </div>
  </nav>

  <main class="container">
    <section id="info"><h2>Info Terbaru</h2><div id="infoList" class="cards"></div></section>
    <section id="urgent"><h2>Pengumuman Penting</h2><div id="urgentList" class="cards"></div></section>
    <section id="artikel"><h2>Artikel</h2><div id="artikelList" class="cards"></div></section>

    <section id="donasi">
      <h2>Donasi</h2>
      <div class="grid-2">
        <div class="card">
          <h3>❤️ Donasi Kegiatan</h3>
          <p class="muted">Dukung dakwah: operasional, dokumentasi, dan kajian.</p>
          <ul class="muted"><li>SMBC/Jenius a.n. Wahyu Setiawan — <strong>90220139952</strong></li><li>Yucho Ginko a.n. トリサンボド — <strong>14660-20688191</strong></li></ul>
        </div>
        <div class="card">
          <h3>✅ Konfirmasi Transfer</h3>
          <input class="btn" id="nama" placeholder="Nama"><br>
          <input class="btn" id="nominal" placeholder="Nominal"><br>
          <input class="btn" id="tgl" type="date"><br>
          <select class="btn" id="bank"><option>SMBC/Jenius</option><option>Yucho</option></select><br>
          <button class="btn primary" id="btnWA">Kirim via WhatsApp</button>
        </div>
      </div>
    </section>
  </main>

  <footer>© <span id="year"></span> Jepang Mengaji • Design by Wahyu</footer>

  <script>
    document.getElementById('year').textContent=new Date().getFullYear();
    // burger toggle
    const menuBtn=document.getElementById('menuBtn');
    const navLinks=document.getElementById('navLinks');
    menuBtn.addEventListener('click',()=>navLinks.classList.toggle('open'));

    // Konfirmasi WA
    document.getElementById('btnWA').onclick=()=>{
      const msg=`Assalamu'alaikum, saya konfirmasi donasi.\nNama: ${nama.value}\nNominal: ${nominal.value}\nTanggal: ${tgl.value}\nBank: ${bank.value}`;
      window.open(`https://wa.me/817084810427?text=${encodeURIComponent(msg)}`);
    }

    // Fetch CSV
    const INFO="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=1656910010&single=true&output=csv";
    const URGENT="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=215662022&single=true&output=csv";
    const ARTIKEL="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=0&single=true&output=csv";

    async function fetchCSV(url){
      const res=await fetch(url);const txt=await res.text();
      const rows=txt.split(/\\r?\\n/).map(r=>r.split(','));
      const head=rows.shift().map(h=>h.trim().toLowerCase());
      return rows.filter(r=>r.length>1).map(r=>{
        const obj={};head.forEach((h,i)=>obj[h]=r[i]);return obj;
      });
    }
    function render(list,id){
      const el=document.getElementById(id);el.innerHTML='';
      if(!list.length){el.parentElement.style.display='none';return;}
      list.forEach(x=>{
        const c=document.createElement('div');c.className='card';
        c.innerHTML=`<h3>${x.judul||x.title||'Info'}</h3>
                     <p class='muted'>${x.konten||x.content||x.desc||''}</p>
                     <div class='muted'>${x.tanggal||x.date||''}</div>`;
        el.appendChild(c);
      });
    }
    (async()=>{
      render(await fetchCSV(INFO),'infoList');
      render(await fetchCSV(URGENT),'urgentList');
      render(await fetchCSV(ARTIKEL),'artikelList');
    })();
  </script>
</body>
</html>
