<!doctype html>
<html lang="id" data-theme="light" id="top">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jepang Mengaji ‚Äî Beranda</title>
  <link rel="icon" href="jm.jpeg" />
  <style>
    :root{
      --bg:#ffffff;--bg-soft:#f8fafc;--text:#0f172a;--muted:#475569;
      --card:#fff;--border:#e5e7eb;--primary:#ef4444;--accent:#0ea5e9;
      --shadow:0 6px 24px rgba(2,6,23,.08)
    }
    [data-theme="dark"]{
      --bg:#0f172a;--bg-soft:#111827;--text:#f1f5f9;--muted:#94a3b8;
      --card:#111827;--border:#1e293b;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",Arial;background:var(--bg);color:var(--text)}

    /* ===== BACKGROUND dengan gradasi + watermark ===== */
    body::before{
      content:"Jepang Mengaji";
      position:fixed;
      inset:0;
      z-index:-1;
      background:linear-gradient(135deg, rgba(239,68,68,0.08), rgba(14,165,233,0.08));
      display:flex;
      justify-content:center;
      align-items:center;
      font-size:14vw;
      font-weight:800;
      color:rgba(0,0,0,0.04);
      white-space:nowrap;
      pointer-events:none;
      user-select:none;
    }
    [data-theme="dark"] body::before{
      background:linear-gradient(135deg, rgba(239,68,68,0.15), rgba(14,165,233,0.15));
      color:rgba(255,255,255,0.04);
    }

    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    .container{max-width:1200px;margin:0 auto;padding:0 14px}
    @media(min-width:640px){.container{padding:0 16px}}
    @media(min-width:1024px){.container{padding:0 20px}}

    /* NAVBAR */
    .nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    [data-theme="dark"] .nav{background:rgba(15,23,42,.9)}
    .nav-inner{display:flex;gap:10px;align-items:center;justify-content:space-between;padding:10px 0;flex-wrap:nowrap}
    .brand{display:flex;gap:10px;align-items:center;font-weight:800;white-space:nowrap;flex:0 0 auto}
    .brand img{width:34px;height:34px;border-radius:8px;border:1px solid var(--border)}
    .brand span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:52vw;display:inline-block}
    .nav-links{display:flex;gap:8px;align-items:center;overflow:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;flex:1 1 auto;min-width:0}
    .nav-links::-webkit-scrollbar{display:none}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--card);border-radius:999px;padding:8px 12px;cursor:pointer;white-space:nowrap}
    .btn.primary{background:var(--primary);border-color:var(--primary);color:#fff}
    .btn.ghost{background:transparent}

    /* LAYOUT + SIDEBAR */
    .layout{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:1024px){ .layout{grid-template-columns:260px 1fr} }
    .sidebar{display:none}
    @media(min-width:1024px){ .sidebar{display:block;position:sticky;top:68px;height:calc(100vh - 84px)} }
    .sidecard{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:12px;box-shadow:var(--shadow)}
    .sidecard h3{margin:4px 0 8px;font-size:15px}
    .sidecard a{display:block;padding:8px;border-radius:8px}
    .sidecard a:hover{background:var(--bg-soft)}

    /* HERO SLIDESHOW */
    .hero{padding:12px 0}
    .carousel{position:relative;border:1px solid var(--border);border-radius:14px;overflow:hidden;background:var(--bg-soft)}
    .frame{position:relative;width:100%;aspect-ratio:16/9}
    .track{position:relative;width:100%;height:100%}
    .slide{position:absolute;inset:0;opacity:0;transition:opacity .6s ease}
    .slide.active{opacity:1}
    .slide img{width:100%;height:100%;object-fit:cover;object-position:center}
    .caption{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.55);color:#fff;padding:6px 10px;border-radius:10px;font-size:13px}
    @media(min-width:640px){.caption{font-size:14px}}
    .ctrl{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:0 6px;pointer-events:none}
    .ctrl button{pointer-events:auto;background:rgba(0,0,0,.55);color:#fff;border:1px solid rgba(255,255,255,.25);width:38px;height:38px;border-radius:999px}
    .dots{position:absolute;left:0;right:0;bottom:8px;display:flex;gap:6px;justify-content:center}
    .dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.55);border:none}
    .dot.active{background:#fff}
    .slide-error{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;padding:14px;color:#991b1b;background:#fee2e2}

    /* SECTIONS */
    .section{padding:16px 0}
    .section h2{margin:0 0 10px}
    .cards{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:640px){.cards{grid-template-columns:repeat(2,1fr)}}
    .cards-3{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:900px){.cards-3{grid-template-columns:repeat(3,1fr)}}
    .card{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:12px}
    .muted{color:var(--muted)}

    footer{border-top:1px solid var(--border);padding:26px 0 40px;color:var(--muted)}
    .foot{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .chip{font-size:.85rem;padding:.25rem .5rem;border-radius:.5rem;border:1px solid var(--border);background:var(--bg-soft)}

    /* ===== MOBILE NAV FIX ===== */
    @media (max-width:480px){
      .brand img{width:30px;height:30px}
      .brand span{font-size:16px;max-width:56vw}
      .btn{padding:6px 10px;font-size:14px}
    }
    @media (max-width:360px){
      .brand span{font-size:15px;max-width:58vw}
      .btn{padding:5px 9px;font-size:13px}
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-inner">
      <div class="brand"><img src="jm.jpeg" alt="JM"><span>Jepang Mengaji</span></div>
      <div class="nav-links">
        <a class="btn ghost" href="#top">Home</a>
        <a class="btn ghost" href="#updates">Info Terbaru</a>
        <a class="btn ghost" href="#urgent">Penting</a>
        <a class="btn ghost" href="#artikel">Artikel</a>
        <a class="btn ghost" href="#donasi">Donasi</a>
        <a class="btn primary" href="https://www.youtube.com/@jepangmengaji1390" target="_blank">Arsip YouTube</a>
      </div>
    </div>
  </nav>

  <div class="container layout">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidecard">
        <h3>Navigasi</h3>
        <a href="#updates">üÜï Info Terbaru</a>
        <a href="#urgent">‚ö†Ô∏è Pengumuman Penting</a>
        <a href="#artikel">üìñ Artikel</a>
        <a href="#donasi">‚ù§Ô∏è Donasi & Konfirmasi</a>
        <a href="https://www.youtube.com/@jepangmengaji1390" target="_blank">‚ñ∂Ô∏è Arsip YouTube</a>
      </div>
    </aside>

    <main>
      <!-- HERO SLIDESHOW -->
      <section class="hero">
        <div class="carousel">
          <div class="frame">
            <div class="track" id="track"></div>
            <div class="ctrl"><button id="prev">‚Äπ</button><button id="next">‚Ä∫</button></div>
            <div class="dots" id="dots"></div>
          </div>
        </div>
      </section>

      <!-- DONASI & KONFIRMASI -->
      <section id="donasi" class="section">
        <div class="cards">
          <div class="card">
            <h3>‚ù§Ô∏è Donasi Kegiatan</h3>
            <p class="muted">Dukung dakwah: operasional, dokumentasi, dan penyelenggaraan kajian.</p>
            <ul class="muted">
              <li>SMBC/Jenius a.n. Wahyu Setiawan ‚Äî <strong id="rek-jenius">90220139952</strong> <button class="chip" data-copy="#rek-jenius">Salin</button></li>
              <li>Yucho Ginko a.n. „Éà„É™„Çµ„É≥„Éú„Éâ ‚Äî <strong id="rek-yucho">14660-20688191</strong> <button class="chip" data-copy="#rek-yucho">Salin</button></li>
            </ul>
          </div>
          <div class="card" id="konfirmasi">
            <h3>‚úÖ Konfirmasi Transfer</h3>
            <input class="btn" id="kf-nama" placeholder="Nama"/>
            <input class="btn" id="kf-nominal" placeholder="Nominal"/>
            <input class="btn" id="kf-tanggal" type="date"/>
            <select class="btn" id="kf-bank"><option>SMBC / Jenius</option><option>Yucho</option></select>
            <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn primary" id="btnWA">WhatsApp</button>
              <a class="btn" id="btnEmail" href="#">Email</a>
            </div>
          </div>
        </div>
      </section>

      <section id="updates" class="section"><h2>Info Terbaru</h2><div id="updatesList" class="cards-3"></div></section>
      <section id="urgent" class="section"><h2>Pengumuman Penting</h2><div id="urgentList" class="cards"></div></section>
      <section id="artikel" class="section"><h2>Artikel</h2><div id="articlesList" class="cards-3"></div></section>
    </main>
  </div>

  <footer>
    <div class="container foot">
      <div>¬© <span id="year"></span> Jepang Mengaji</div>
      <span class="chip">Design by Wahyu</span>
    </div>
  </footer>

<script>
document.getElementById('year').textContent=new Date().getFullYear();

// Copy rekening
document.addEventListener('click',e=>{
  const btn=e.target.closest('.chip[data-copy]');
  if(btn){
    const el=document.querySelector(btn.dataset.copy);
    navigator.clipboard.writeText(el.textContent).then(()=>alert("Tersalin"));
  }
});

// Konfirmasi Transfer
function buildMsg(){
  return `Assalamu'alaikum,%0ANama: ${kf-nama.value}%0ANominal: ${kf-nominal.value}%0ATanggal: ${kf-tanggal.value}%0ATransfer ke: ${kf-bank.value}`;
}
btnWA.onclick=()=>window.open("https://wa.me/817084810427?text="+buildMsg());
btnEmail.onclick=()=>btnEmail.href="mailto:jepangmengaji@gmail.com?subject=Konfirmasi&body="+buildMsg();

// Slideshow
const fallbackSlides=[
  {src:"assets/slides/1.jpeg",caption:"Kegiatan 1"},
  {src:"assets/slides/2.jpeg",caption:"Kegiatan 2"},
  {src:"assets/slides/3.jpeg",caption:"Kegiatan 3"}
];
function initSlide(slides){
  const track=document.getElementById('track'),dots=document.getElementById('dots');
  track.innerHTML='';dots.innerHTML='';
  slides.forEach((s,i)=>{
    const fig=document.createElement('figure');
    fig.className='slide'+(i==0?' active':'');
    fig.innerHTML=`<img src="${s.src}"><figcaption class="caption">${s.caption}</figcaption>`;
    track.appendChild(fig);
    const d=document.createElement('button');d.className='dot'+(i==0?' active':'');d.onclick=()=>go(i,true);dots.appendChild(d);
  });
  let idx=0,timer;const list=[...track.children];
  function show(i){list.forEach((sl,j)=>sl.classList.toggle('active',i==j));[...dots.children].forEach((d,j)=>d.classList.toggle('active',i==j))}
  function go(i,u){idx=(i+list.length)%list.length;show(idx);if(u)restart();}
  function next(){go(idx+1)};function prev(){go(idx-1)}
  function restart(){clearInterval(timer);timer=setInterval(next,5000)}
  document.getElementById('next').onclick=next;document.getElementById('prev').onclick=prev;
  restart();
}
initSlide(fallbackSlides);

// CSV load
const INFO="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=1656910010&single=true&output=csv";
const URG="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=215662022&single=true&output=csv";
const ART="https://docs.google.com/spreadsheets/d/e/2PACX-1vQiIOueuc-YygpdulT9x9ZjJUA2jlaWXu2uGzwgHcugNebW5HLjR66luq3kHmqDvTmNJlSjpjsIQ6PG/pub?gid=0&single=true&output=csv";
async function fetchCSV(u){const t=await fetch(u);const tx=await t.text();const r=tx.trim().split("\n").map(l=>l.split(","));const h=r.shift().map(x=>x.toLowerCase());return r.map(x=>Object.fromEntries(h.map((k,i)=>[k,x[i]])))}
function render(id,list){const w=document.getElementById(id);w.innerHTML='';if(!list.length){w.innerHTML='<div class="card muted">Belum ada data</div>';return;}list.forEach(x=>{w.innerHTML+=`<div class="card"><h3>${x.judul||x.title||'Info'}</h3><p class="muted">${x.konten||x.desc||''}</p></div>`})}
(async()=>{render("updatesList",await fetchCSV(INFO));render("urgentList",await fetchCSV(URG));render("articlesList",await fetchCSV(ART));})();
</script>
</body>
</html>
